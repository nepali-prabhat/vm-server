// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Drink {
  id       Int     @id @default(autoincrement())
  name     String  @unique
  price    Float
  stock    Int
  imageUrl String?
  order    Order[]
}

model FundStock {
  fundType String @id
  stock    Float
}

model Order {
  id          Int         @id @default(autoincrement())
  drink       Drink       @relation(fields: [drinkId], references: [id])
  drinkId     Int
  status      OrderStatus @relation(fields: [orderStatus], references: [status])
  orderStatus String
  purchase    Purchase?
}

model Purchase {
  id      Int    @id @default(autoincrement())
  order   Order  @relation(fields: [orderId], references: [id])
  orderId Int    @unique
  coins   Int?   @default(0)
  cash    Float? @default(0.00)
}

// Because SQlite doesn't support enums, we create a table
// Values will be: 
// PENDING, SUCCESS,
// CANCELLED, TIMEOUT,
// INSUFFICIENT_COIN, INSUFFICIENT_CASH
model OrderStatus {
  status String  @id
  Order  Order[]
}
